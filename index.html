<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Portal de Usuario</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" />
  <style>
    :root {
      --background-color: #e0e0e0;
      --text-color: #333;
      --text-color-light: #555;
      --card-bg: rgba(255, 255, 255, 0.2);
      --input-bg: rgba(255, 255, 255, 0.4);
      --primary-color: rgba(100, 149, 237, 0.8);
      --primary-hover: rgba(70, 130, 180, 0.9);
      --secondary-bg: rgba(255, 255, 255, 0.3);
      --secondary-hover: rgba(255, 255, 255, 0.5);
      --cloud-gradient: linear-gradient(to bottom, #a0c0e0, #c0d0e0);
      --weekend-bg: rgba(255, 69, 0, 0.6);
      --today-border: rgba(255, 99, 71, 0.7);
      --selected-bg: rgba(255, 165, 0, 0.7);
      --disabled-bg: rgba(255, 69, 0, 0.3);
      --shadow-color: rgba(0, 0, 0, 0.1);
      --shadow-color-hover: rgba(0, 0, 0, 0.15);
      --modal-bg: white;
      --modal-overlay: rgba(0, 0, 0, 0.6);
      --profile-border: rgba(255, 255, 255, 0.5);
      --error-color: #ff3333;
      --success-color: #33cc33;
      --notification-bg: rgba(255, 255, 255, 0.9);
      --notification-border: #ddd;
      --holiday-color: white;
    }

    .dark-mode {
      --background-color: #121212;
      --text-color: #e0e0e0;
      --text-color-light: #b0b0b0;
      --card-bg: rgba(30, 30, 30, 0.6);
      --input-bg: rgba(50, 50, 50, 0.8);
      --primary-color: rgba(70, 130, 180, 0.8);
      --primary-hover: rgba(100, 149, 237, 0.9);
      --secondary-bg: rgba(40, 40, 40, 0.5);
      --secondary-hover: rgba(60, 60, 60, 0.7);
      --cloud-gradient: linear-gradient(to bottom, #203040, #304050);
      --weekend-bg: rgba(180, 60, 30, 0.6);
      --today-border: rgba(180, 70, 50, 0.7);
      --selected-bg: rgba(180, 120, 20, 0.7);
      --disabled-bg: rgba(180, 60, 30, 0.3);
      --shadow-color: rgba(0, 0, 0, 0.2);
      --shadow-color-hover: rgba(0, 0, 0, 0.3);
      --modal-bg: #333;
      --modal-overlay: rgba(0, 0, 0, 0.8);
      --profile-border: rgba(100, 100, 100, 0.5);
      --error-color: #ff5555;
      --success-color: #55cc55;
      --notification-bg: rgba(50, 50, 50, 0.9);
      --notification-border: #444;
      --holiday-color: #e0e0e0;
    }

    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--background-color);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 50px 0;
      overflow-y: auto;
      position: relative;
      color: var(--text-color);
      transition: all 0.5s ease;
    }

    /* Fondo animado */
    #clouds-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -10;
      overflow: hidden;
      transition: all 0.5s ease;
    }

    .clouds-gradient {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--cloud-gradient);
      z-index: -9;
      transition: background 0.5s ease;
    }

    .clouds-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 200%;
      height: 100%;
      background-image: url('https://raw.githubusercontent.com/danielfigueroa1879/User/40c376aa2e2f949b71a93eaa2636ca4ebc4768f9/nubes.jpg');
      background-size: cover;
      background-repeat: repeat-x;
      opacity: 0.4;
      animation: animateClouds 60s linear infinite;
      z-index: -8;
    }

    @keyframes animateClouds {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    /* Sistema de notificaciones */
    #notification-center {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 300px;
      max-height: 80vh;
      overflow-y: auto;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .notification {
      background-color: var(--notification-bg);
      color: var(--text-color);
      border-left: 4px solid var(--primary-color);
      border-radius: 5px;
      padding: 12px 15px;
      margin-bottom: 10px;
      box-shadow: 0 3px 10px var(--shadow-color);
      transform: translateX(120%);
      opacity: 0;
      transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), 
                  opacity 0.5s ease;
    }

    .notification.show {
      transform: translateX(0);
      opacity: 1;
    }

    .notification.success {
      border-left-color: var(--success-color);
    }

    .notification.error {
      border-left-color: var(--error-color);
    }

    .notification.warning {
      border-left-color: orange;
    }

    .notification-title {
      font-weight: 600;
      margin-bottom: 5px;
      display: flex;
      justify-content: space-between;
    }

    .notification-close {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 16px;
      color: var(--text-color-light);
      padding: 0;
      margin-left: 10px;
    }

    .notification-message {
      font-size: 0.9em;
    }

    /* PÃ¡gina de bienvenida */
    .welcome-content {
      text-align: center;
      padding: 20px 0;
    }

    .welcome-logo {
      margin: 0 auto 20px;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }

    .welcome-content h1 {
      font-size: 2.5em;
      color: var(--text-color);
      margin-bottom: 10px;
      text-shadow: 0 2px 4px var(--shadow-color);
    }

    .welcome-subtitle {
      font-size: 1.2em;
      color: var(--text-color-light);
      margin-bottom: 30px;
    }

    .welcome-features {
      display: grid;
      grid-template-columns: repeat(2, 160px);
      grid-template-rows: repeat(2, auto);
      grid-gap: 20px;
      justify-content: center;
      margin-bottom: 30px;
    }

    .feature-item {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 10px;
      width: 160px;
      height: 120px;
      text-align: center;
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      box-shadow: 0 4px 6px var(--shadow-color);
      transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), 
                  box-shadow 0.3s ease;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .feature-item:hover {
      transform: translateY(-5px) scale(1.03);
      box-shadow: 0 6px 10px var(--shadow-color-hover);
    }

    .feature-icon {
      font-size: 2em;
      margin-bottom: 10px;
    }

    .feature-text {
      font-weight: 500;
      color: var(--text-color);
    }

    .primary-button {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 30px;
      font-size: 1.1em;
      cursor: pointer;
      transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55), 
                  box-shadow 0.3s ease, 
                  background-color 0.3s ease;
      box-shadow: 0 4px 6px var(--shadow-color);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      margin-top: 20px;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .primary-button:hover {
      background-color: var(--primary-hover);
      transform: translateY(-3px) scale(1.03);
      box-shadow: 0 6px 12px var(--shadow-color-hover);
    }

    .secondary-button {
      background: var(--secondary-bg);
      color: var(--text-color);
      border: 1px solid rgba(255, 255, 255, 0.3);
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      font-size: 0.9em;
      transition: background-color 0.3s ease, transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      margin-top: 10px;
    }

    .secondary-button:hover {
      background: var(--secondary-hover);
      transform: translateY(-2px) scale(1.02);
    }

    .page-container {
      max-width: 600px;
      width: 90%;
      margin: 0 auto 20px auto;
      background-color: var(--card-bg);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.18);
      z-index: 1;
      position: relative;
      transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), 
                  box-shadow 0.3s ease,
                  background-color 0.5s ease;
      display: none;
      box-sizing: border-box;
      color: var(--text-color);
    }

    .page-container:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 32px 0 rgba(31, 38, 135, 0.47);
    }

    .form-group {
      margin-bottom: 15px;
      position: relative;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: var(--text-color);
      transition: color 0.3s ease;
    }

    .form-group input {
      width: 100%;
      padding: 10px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 8px;
      background-color: var(--input-bg);
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
      color: var(--text-color);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      transition: all 0.3s ease;
    }

    .form-group input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(100, 149, 237, 0.3);
    }

    .form-group .error-message {
      color: var(--error-color);
      font-size: 0.8em;
      margin-top: 5px;
      font-weight: 500;
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .form-group .error-message.show {
      opacity: 1;
      transform: translateY(0);
    }

    .form-group.error input {
      border-color: var(--error-color);
    }

    button {
      background-color: var(--primary-color);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.3);
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      font-size: 1em;
      transition: background-color 0.3s ease, 
                 transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55), 
                 box-shadow 0.3s ease;
      backdrop-filter: blur(5px);
      display: block;
      width: 100%;
      margin-top: 20px;
    }

    button:hover {
      background-color: var(--primary-hover);
      transform: scale(1.02) translateY(-2px);
      box-shadow: 0 4px 8px var(--shadow-color-hover);
    }

    #profile-page h2 {
      text-align: center;
      color: var(--text-color);
      margin-bottom: 20px;
    }

    .profile-info p {
      margin-bottom: 10px;
      color: var(--text-color-light);
      padding: 8px;
      background-color: var(--secondary-bg);
      border-radius: 5px;
      transition: all 0.3s ease;
    }

    .profile-info p:hover {
      transform: translateX(5px);
      background-color: var(--secondary-hover);
    }

    .profile-info strong {
      color: var(--text-color);
    }

    #calendar-page .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 0 10px;
    }

    #calendar-page .calendar-header h2 {
      margin: 0;
      font-size: 1.5em;
      color: var(--text-color);
    }

    #calendar-page .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      text-align: center;
    }

    #calendar-page .day-name {
      font-weight: bold;
      color: var(--text-color-light);
      padding: 10px 0;
    }

    #calendar-page .day {
      padding: 10px 5px;
      border-radius: 8px;
      background-color: var(--input-bg);
      cursor: pointer;
      transition: background-color 0.3s ease, 
                 transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
      position: relative;
      overflow: hidden;
      color: var(--text-color);
    }

    #calendar-page .day:hover {
      background-color: var(--secondary-hover);
      transform: scale(1.05);
    }

    #calendar-page .day.other-month {
      opacity: 0.5;
      pointer-events: none;
    }

    #calendar-page .day.today {
      font-weight: bold;
      border: 2px solid var(--today-border);
    }

    #calendar-page .day.selected {
      background-color: var(--selected-bg);
      color: white;
      font-weight: bold;
      transform: scale(1.05);
    }

    #calendar-page .day.holiday,
    #calendar-page .day.weekend {
      background-color: var(--weekend-bg);
      color: var(--holiday-color);
      font-weight: bold;
      cursor: not-allowed !important;
    }

    #calendar-page .day.disabled {
      background-color: var(--disabled-bg);
      color: var(--holiday-color);
      cursor: not-allowed;
      pointer-events: none;
    }

    #calendar-page .day .event-indicator {
      position: absolute;
      bottom: 2px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.6em;
      color: rgba(255, 255, 255, 0.8);
    }

    #calendar-page .day.holiday .event-indicator {
      color: rgba(255, 255, 255, 0.9);
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--modal-overlay);
      justify-content: center;
      align-items: center;
      z-index: 9999;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    .modal.show {
      opacity: 1;
    }

    .modal-content {
      background: var(--modal-bg);
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      transform: scale(0.8);
      opacity: 0;
      transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), 
                  opacity 0.5s ease;
      color: var(--text-color);
    }

    .modal.show .modal-content {
      transform: scale(1);
      opacity: 1;
    }

    .modal-content select,
    .modal-content button {
      margin-top: 10px;
      padding: 10px;
      width: 100%;
      font-size: 1em;
      background-color: var(--input-bg);
      color: var(--text-color);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .modal-content select:focus {
      outline: none;
      border-color: var(--primary-color);
    }

    /* Formulario de ediciÃ³n de perfil */
    .edit-profile-form {
      display: none;
      margin-top: 20px;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .edit-profile-form input[type="text"],
    .edit-profile-form input[type="email"] {
      width: 100%;
      margin-bottom: 10px;
    }

    .edit-profile-form label {
      display: block;
      margin-bottom: 5px;
      color: var(--text-color);
    }

    .edit-profile-form input[type="file"] {
      margin-top: 10px;
    }

    .profile-photo {
      text-align: center;
      margin-bottom: 20px;
    }

    .profile-photo img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--profile-border);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      box-shadow: 0 4px 8px var(--shadow-color);
    }

    .profile-photo img:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 16px var(--shadow-color-hover);
    }

    /* Badge de notificaciÃ³n */
    .notification-badge {
      position: relative;
    }

    .notification-badge[data-count]:after {
      content: attr(data-count);
      position: absolute;
      top: -10px;
      right: -10px;
      background: var(--error-color);
      color: white;
      border-radius: 50%;
      padding: 3px 6px;
      font-size: 12px;
      font-weight: bold;
      min-width: 14px;
      text-align: center;
      box-shadow: 0 2px 4px var(--shadow-color);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .page-container {
        padding: 20px;
      }
      
      .welcome-features {
        grid-template-columns: repeat(2, 140px);
        grid-gap: 15px;
      }
      
      .feature-item {
        width: 140px;
        height: 110px;
        padding: 12px;
        font-size: 0.9em;
      }

      #calendar-page .calendar-header h2 {
        font-size: 1.2em;
      }

      #calendar-page .calendar-header button {
        padding: 6px 10px;
        font-size: 0.9em;
      }

      #calendar-page .day {
        padding: 8px 3px;
        font-size: 0.9em;
      }

      .profile-info p {
        font-size: 0.9em;
      }

      .form-group input {
        font-size: 0.9em;
      }

      .modal-content {
        font-size: 0.9em;
      }
      
      #notification-center {
        width: calc(100% - 40px);
        right: 20px;
      }
    }

    /* Animaciones de pÃ¡gina */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translate3d(0, 40px, 0);
      }
      to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
      }
    }

    .fade-in-up {
      animation: fadeInUp 0.5s ease forwards;
    }
  </style>
</head>
<body>

<!-- Fondo animado -->
<div id="clouds-background">
  <div class="clouds-gradient"></div>
  <div class="clouds-image"></div>
</div>

<!-- Centro de notificaciones -->
<div id="notification-center"></div>

<!-- Contenedores -->
<div id="welcome-page" class="page-container">
  <div class="welcome-content">
    <div class="welcome-logo">
      <svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 3L19 8.5V15.5L12 21L5 15.5V8.5L12 3Z" stroke="#6495ED" stroke-width="2" fill="rgba(100, 149, 237, 0.2)"></path>
        <path d="M12 8L15 10V14L12 16L9 14V10L12 8Z" fill="#6495ED"></path>
      </svg>
    </div>
    <h1>Portal de Usuarios</h1>
    <p class="welcome-subtitle">Sistema de gestiÃ³n de permisos y feriados</p>
    <div class="welcome-features">
      <div class="feature-item">
        <div class="feature-icon">ð</div>
        <div class="feature-text">Calendario Interactivo</div>
      </div>
      <div class="feature-item">
        <div class="feature-icon">ð</div>
        <div class="feature-text">GestiÃ³n de Permisos</div>
      </div>
      <div class="feature-item">
        <div class="feature-icon">ð</div>
        <div class="feature-text">GeneraciÃ³n de PDF</div>
      </div>
      <div class="feature-item">
        <div class="feature-icon notification-badge" data-count="2">ð</div>
        <div class="feature-text">Notificaciones</div>
      </div>
    </div>
    <button id="welcome-login-button" class="primary-button">Ingresar al Sistema</button>
  </div>
</div>

<div id="login-page" class="page-container">
  <h2>Iniciar SesiÃ³n</h2>
  <div class="form-group" id="email-group">
    <label for="email">Correo ElectrÃ³nico:</label>
    <input type="email" id="email" placeholder="Ingresa tu correo" />
    <div class="error-message" id="email-error"></div>
  </div>
  <div class="form-group" id="password-group">
    <label for="password">ContraseÃ±a:</label>
    <input type="password" id="password" placeholder="Ingresa tu contraseÃ±a" />
    <div class="error-message" id="password-error"></div>
  </div>
  <button id="login-button">Entrar</button>
  <button id="back-to-welcome-button" class="secondary-button">Volver</button>
</div>

<div id="profile-page" class="page-container">
  <div class="profile-photo">
    <img id="profile-pic" src="https://placehold.co/100x100/cccccc/999999?text=Foto+Perfil" alt="Foto de perfil">
  </div>
  <h2>Mi Perfil</h2>
  <div class="profile-info">
    <p><strong>Nombre Completo:</strong> <span id="nombre-display">Ruth PÃ©rez</span></p>
    <p><strong>RUT:</strong> <span id="rut-display">12.345.678-9</span></p>
    <p><strong>DirecciÃ³n:</strong> <span id="direccion-display">Calle Falsa 123, Santiago</span></p>
    <p><strong>TelÃ©fono:</strong> <span id="telefono-display">+56 9 1234 5678</span></p>
    <p><strong>Correo:</strong> <span id="correo-display">ruth.perez@example.com</span></p>
  </div>
  <button id="edit-profile-button">Editar Perfil</button>
  <button id="manage-permissions-button">Gestionar Permisos y Feriados</button>
  <button id="view-notifications-button" class="notification-badge" data-count="2">Ver Notificaciones</button>
  <button onclick="showPage(welcomePage)" style="margin-top: 10px;">â¬ï¸ AtrÃ¡s</button>

  <!-- Formulario de ediciÃ³n de perfil -->
  <div id="edit-profile-form" class="edit-profile-form">
    <h3>Editar Datos</h3>
    <div class="form-group" id="nombre-group">
      <label for="nombre-input">Nombre:</label>
      <input type="text" id="nombre-input" placeholder="Tu nombre completo">
      <div class="error-message" id="nombre-error"></div>
    </div>
    <div class="form-group" id="rut-group">
      <label for="rut-input">RUT:</label>
      <input type="text" id="rut-input" placeholder="Ej: 12.345.678-9">
      <div class="error-message" id="rut-error"></div>
    </div>
    <div class="form-group" id="direccion-group">
      <label for="direccion-input">DirecciÃ³n:</label>
      <input type="text" id="direccion-input" placeholder="Tu direcciÃ³n">
      <div class="error-message" id="direccion-error"></div>
    </div>
    <div class="form-group" id="telefono-group">
      <label for="telefono-input">TelÃ©fono:</label>
      <input type="text" id="telefono-input" placeholder="+56 9 1234 5678">
      <div class="error-message"
 <div class="error-message" id="telefono-error"></div>
    </div>
    <div class="form-group" id="correo-group">
      <label for="correo-input">Correo:</label>
      <input type="email" id="correo-input" placeholder="tu@email.com">
      <div class="error-message" id="correo-error"></div>
    </div>
    <div class="form-group">
      <label for="foto-input">Subir Foto:</label>
      <input type="file" id="foto-input" accept="image/*">
    </div>
    <button id="save-profile-button">Guardar Cambios</button>
    <button id="cancel-edit-button">Cancelar</button>
  </div>
</div>

<div id="calendar-page" class="page-container">
  <div class="calendar-header">
    <div class="nav-buttons">
      <button id="prevMonth">Anterior</button>
      <button id="nextMonth">Siguiente</button>
    </div>
    <h2 id="currentMonthYear"></h2>
  </div>
  <div class="calendar-grid"></div>
  <button id="back-to-profile-button" class="back-button">Volver al Perfil</button>
  <button id="confirm-selection-button" style="display: none;">Confirmar SelecciÃ³n</button>
</div>

<!-- Modal para solicitar permiso -->
<div class="modal" id="request-modal">
  <div class="modal-content">
    <h3>Seleccionaste <span id="selected-days-count">0</span> dÃ­a(s)</h3>
    <select id="leave-type">
      <option value="Feriado">Feriado</option>
      <option value="Administrativo">Permiso Administrativo</option>
      <option value="Nacimiento">Nacimiento hijo</option>
      <option value="Postnatal">Postnatal-Parental</option>
      <option value="Matrimonio">Permiso por Matrimonio</option>
      <option value="Muerte">Muerte CÃ³nyuge o Conviviente Civil</option>
    </select>
    <button id="generate-pdf-button">Descargar PDF</button>
    <button id="close-modal-button">Cerrar</button>
  </div>
</div>

<!-- Modal de notificaciones -->
<div class="modal" id="notifications-modal">
  <div class="modal-content">
    <h3>Mis Notificaciones</h3>
    <div id="notifications-list">
      <!-- Las notificaciones se cargarÃ¡n dinÃ¡micamente aquÃ­ -->
    </div>
    <button id="close-notifications-button">Cerrar</button>
  </div>
</div>

<!-- jsPDF CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
  // Referencias a elementos del DOM
  const loginPage = document.getElementById('login-page');
  const profilePage = document.getElementById('profile-page');
  const calendarPage = document.getElementById('calendar-page');
  const welcomePage = document.getElementById('welcome-page');

  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');
  const loginButton = document.getElementById('login-button');
  const welcomeLoginButton = document.getElementById('welcome-login-button');
  const backToWelcomeButton = document.getElementById('back-to-welcome-button');
  const managePermissionsButton = document.getElementById('manage-permissions-button');
  const backToProfileButton = document.getElementById('back-to-profile-button');
  const prevMonthButton = document.getElementById('prevMonth');
  const nextMonthButton = document.getElementById('nextMonth');
  const calendarGrid = document.querySelector('#calendar-page .calendar-grid');
  const currentMonthYear = document.getElementById('currentMonthYear');
  const confirmSelectionButton = document.getElementById('confirm-selection-button');
  const requestModal = document.getElementById('request-modal');
  const leaveTypeSelect = document.getElementById('leave-type');
  const selectedDaysCount = document.getElementById('selected-days-count');
  const notificationsModal = document.getElementById('notifications-modal');
  const notificationsBtn = document.getElementById('view-notifications-button');
  const closeNotificationsBtn = document.getElementById('close-notifications-button');
  const notificationsList = document.getElementById('notifications-list');
  const notificationCenter = document.getElementById('notification-center');

  // Elementos del perfil
  const editProfileButton = document.getElementById('edit-profile-button');
  const editProfileForm = document.getElementById('edit-profile-form');
  const saveProfileButton = document.getElementById('save-profile-button');
  const cancelEditButton = document.getElementById('cancel-edit-button');

  const profileElements = {
    nombre: document.getElementById('nombre-display'),
    rut: document.getElementById('rut-display'),
    direccion: document.getElementById('direccion-display'),
    telefono: document.getElementById('telefono-display'),
    correo: document.getElementById('correo-display'),
    profilePic: document.getElementById('profile-pic')
  };

  const inputFields = {
    nombre: document.getElementById('nombre-input'),
    rut: document.getElementById('rut-input'),
    direccion: document.getElementById('direccion-input'),
    telefono: document.getElementById('telefono-input'),
    correo: document.getElementById('correo-input'),
    foto: document.getElementById('foto-input')
  };

  let currentDate = new Date();
  let selectedDays = [];
  let darkMode = false;

  // Notificaciones del sistema
  let notifications = [
    {
      id: 1,
      title: 'Permiso Aprobado',
      message: 'Tu solicitud de permiso administrativo para el 15/05/2025 ha sido aprobada.',
      type: 'success',
      date: '2025-05-10T10:30:00',
      read: false
    },
    {
      id: 2,
      title: 'Recordatorio',
      message: 'Recuerda que tienes un permiso pendiente para el prÃ³ximo mes.',
      type: 'warning',
      date: '2025-05-11T09:15:00',
      read: false
    }
  ];

  // Feriados chilenos
  const chileanHolidays = [
    { month: 0, day: 1 },
    { month: 3, day: 18 },
    { month: 3, day: 19 },
    { month: 4, day: 1 },
    { month: 4, day: 21 },
    { month: 5, day: 26 },
    { month: 6, day: 16 },
    { month: 7, day: 15 },
    { month: 8, day: 18 },
    { month: 8, day: 19 },
    { month: 9, day: 31 },
    { month: 10, day: 1 },
    { month: 11, day: 8 },
    { month: 11, day: 25 }
  ];

  // FunciÃ³n para detectar preferencia del sistema
  function prefersDarkMode() {
    return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  }

  // FunciÃ³n para actualizar la apariencia basada en la preferencia del sistema
  function updateThemeAppearance() {
    // Determinar si debemos usar modo oscuro basado en la configuraciÃ³n del sistema
    darkMode = prefersDarkMode();
    
    // Aplicar el tema
    if (darkMode) {
      document.body.classList.add('dark-mode');
    } else {
      document.body.classList.remove('dark-mode');
    }
  }

  // Escuchar cambios en la preferencia del sistema
  if (window.matchMedia) {
    const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    darkModeMediaQuery.addEventListener('change', (e) => {
      updateThemeAppearance();
      showNotification('Tema cambiado', 'El tema se ha ajustado a las preferencias de tu sistema.', 'info');
    });
  }

  // Funciones para mostrar/ocultar pÃ¡ginas con animaciÃ³n
  function showPage(pageElement) {
    // Ocultar todas las pÃ¡ginas
    [welcomePage, loginPage, profilePage, calendarPage].forEach(p => {
      p.style.display = 'none';
      p.classList.remove('fade-in-up');
    });
    
    // Mostrar la pÃ¡gina solicitada con animaciÃ³n
    pageElement.style.display = 'block';
    void pageElement.offsetWidth; // Forzar reflow para reiniciar la animaciÃ³n
    pageElement.classList.add('fade-in-up');
    
    // Desplazarse al inicio de la pÃ¡gina
    window.scrollTo({ top: 0, behavior: 'smooth' });
    
    if (pageElement === calendarPage) renderCalendar(currentDate);
  }

  // Sistema de notificaciones
  function showNotification(title, message, type = 'info', duration = 5000) {
    const notificationId = 'notif-' + Date.now();
    const notification = document.createElement('div');
    notification.id = notificationId;
    notification.className = `notification ${type}`;
    notification.innerHTML = `
      <div class="notification-title">
        ${title}
        <button class="notification-close" onclick="removeNotification('${notificationId}')">Ã</button>
      </div>
      <div class="notification-message">${message}</div>
    `;
    notificationCenter.appendChild(notification);
    
    // Mostrar con animaciÃ³n despuÃ©s de un pequeÃ±o retraso
    setTimeout(() => {
      notification.classList.add('show');
    }, 10);
    
    // Ocultar automÃ¡ticamente despuÃ©s de la duraciÃ³n especificada
    if (duration) {
      setTimeout(() => {
        removeNotification(notificationId);
      }, duration);
    }
    
    return notificationId;
  }

  function removeNotification(id) {
    const notification = document.getElementById(id);
    if (notification) {
      notification.classList.remove('show');
      setTimeout(() => {
        notification.remove();
      }, 500);
    }
  }

  // AÃ±adir la funciÃ³n al Ã¡mbito global para que funcione el onclick
  window.removeNotification = removeNotification;

  // Actualizar contador de notificaciones
  function updateNotificationBadge() {
    const unreadCount = notifications.filter(n => !n.read).length;
    const badges = document.querySelectorAll('.notification-badge');
    
    badges.forEach(badge => {
      if (unreadCount > 0) {
        badge.setAttribute('data-count', unreadCount);
      } else {
        badge.removeAttribute('data-count');
      }
    });
  }

  // Cargar notificaciones en el modal
  function loadNotifications() {
    notificationsList.innerHTML = '';
    
    if (notifications.length === 0) {
      notificationsList.innerHTML = '<p>No tienes notificaciones.</p>';
      return;
    }
    
    // Ordenar por fecha, mÃ¡s reciente primero
    const sortedNotifications = [...notifications].sort((a, b) => 
      new Date(b.date) - new Date(a.date)
    );
    
    sortedNotifications.forEach(notif => {
      const notifElement = document.createElement('div');
      notifElement.className = `notification ${notif.type}${notif.read ? ' read' : ''}`;
      notifElement.innerHTML = `
        <div class="notification-title">
          ${notif.title}
          <small>${new Date(notif.date).toLocaleString()}</small>
        </div>
        <div class="notification-message">${notif.message}</div>
      `;
      notificationsList.appendChild(notifElement);
      
      // Marcar como leÃ­da al hacer clic
      notifElement.addEventListener('click', () => {
        notif.read = true;
        notifElement.classList.add('read');
        updateNotificationBadge();
      });
    });
    
    // Marcar todas como leÃ­das
    notifications.forEach(n => n.read = true);
    updateNotificationBadge();
  }

  // ValidaciÃ³n de formularios
  function validateEmail(email) {
    const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return re.test(email);
  }

  function validateRut(rut) {
    // Eliminar puntos y guiÃ³n
    rut = rut.replace(/\./g, '').replace('-', '');
    
    // Verificar formato
    if (!/^[0-9]{7,8}[0-9kK]$/.test(rut)) {
      return false;
    }
    
    // Separar cuerpo y dÃ­gito verificador
    const dv = rut.slice(-1).toUpperCase();
    const cuerpo = rut.slice(0, -1);
    
    // Calcular dÃ­gito verificador
    let suma = 0;
    let multiplo = 2;
    
    for (let i = cuerpo.length - 1; i >= 0; i--) {
      suma += Number(cuerpo.charAt(i)) * multiplo;
      multiplo = multiplo < 7 ? multiplo + 1 : 2;
    }
    
    const dvEsperado = 11 - (suma % 11);
    const dvCalculado = dvEsperado === 11 ? '0' : dvEsperado === 10 ? 'K' : dvEsperado.toString();
    
    return dvCalculado === dv;
  }

  function validatePhone(phone) {
    // Formato chileno: +56 9 XXXX XXXX o +56 9XXXXXXXX o +569XXXXXXXX
    return /^(\+?56)?(\s?9)(\s?[0-9]{4})(\s?[0-9]{4})$/.test(phone);
  }

  function validateField(field, value) {
    const fieldGroup = document.getElementById(`${field}-group`);
    const errorElement = document.getElementById(`${field}-error`);
    
    let isValid = true;
    let errorMsg = '';
    
    switch (field) {
      case 'email':
        isValid = validateEmail(value);
        errorMsg = 'Por favor, ingresa un correo electrÃ³nico vÃ¡lido.';
        break;
      case 'password':
        isValid = value.length >= 6;
        errorMsg = 'La contraseÃ±a debe tener al menos 6 caracteres.';
        break;
      case 'rut':
        isValid = validateRut(value);
        errorMsg = 'Por favor, ingresa un RUT chileno vÃ¡lido.';
        break;
      case 'telefono':
        isValid = validatePhone(value);
        errorMsg = 'Por favor, ingresa un nÃºmero de telÃ©fono mÃ³vil chileno vÃ¡lido.';
        break;
      case 'correo':
        isValid = validateEmail(value);
        errorMsg = 'Por favor, ingresa un correo electrÃ³nico vÃ¡lido.';
        break;
      case 'nombre':
        isValid = value.trim().length > 0;
        errorMsg = 'El nombre no puede estar vacÃ­o.';
        break;
    }
    
    if (!isValid && value.trim() !== '') {
      fieldGroup.classList.add('error');
      errorElement.textContent = errorMsg;
      errorElement.classList.add('show');
    } else {
      fieldGroup.classList.remove('error');
      errorElement.classList.remove('show');
    }
    
    return isValid || value.trim() === '';
  }

  // AÃ±adir event listeners para validaciÃ³n en tiempo real
  function setupValidation() {
    // Login form
    emailInput.addEventListener('input', () => {
      validateField('email', emailInput.value);
    });
    
    passwordInput.addEventListener('input', () => {
      validateField('password', passwordInput.value);
    });
    
    // Profile form
    inputFields.nombre.addEventListener('input', () => {
      validateField('nombre', inputFields.nombre.value);
    });
    
    inputFields.rut.addEventListener('input', () => {
      validateField('rut', inputFields.rut.value);
    });
    
    inputFields.telefono.addEventListener('input', () => {
      validateField('telefono', inputFields.telefono.value);
    });
    
    inputFields.correo.addEventListener('input', () => {
      validateField('correo', inputFields.correo.value);
    });
  }

  // Funciones auxiliares para el calendario
  function isHoliday(month, day) {
    return chileanHolidays.some(h => h.month === month && h.day === day);
  }

  function isWeekend(date) {
    const dayOfWeek = date.getDay(); // domingo = 0 ... sÃ¡bado = 6
    return dayOfWeek === 0 || dayOfWeek === 6;
  }

  function renderCalendar(date) {
    calendarGrid.innerHTML = '';
    const year = date.getFullYear();
    const month = date.getMonth();

    // Mostrar nombres de los dÃ­as de la semana
    const dayNames = ['Lun', 'Mar', 'MiÃ©', 'Jue', 'Vie', 'SÃ¡b', 'Dom'];
    dayNames.forEach(name => {
      const div = document.createElement('div');
      div.classList.add('day-name');
      div.textContent = name;
      calendarGrid.appendChild(div);
    });

    // Configurar mes y aÃ±o
    currentMonthYear.textContent = new Intl.DateTimeFormat('es-CL', { month: 'long', year: 'numeric' }).format(date);

    const firstDayOfMonth = new Date(year, month, 1);
    const lastDayOfMonth = new Date(year, month + 1, 0);
    const numDaysInMonth = lastDayOfMonth.getDate();

    let firstDayOfWeek = firstDayOfMonth.getDay();
    firstDayOfWeek = (firstDayOfWeek === 0) ? 6 : firstDayOfWeek - 1;

    const prevMonthLastDay = new Date(year, month, 0).getDate();
    for (let i = firstDayOfWeek; i > 0; i--) {
      const div = document.createElement('div');
      div.classList.add('day', 'other-month');
      div.textContent = prevMonthLastDay - i + 1;
      calendarGrid.appendChild(div);
    }

    for (let i = 1; i <= numDaysInMonth; i++) {
      const dayDiv = document.createElement('div');
      dayDiv.classList.add('day');
      dayDiv.textContent = i;
      const currentDay = new Date(year, month, i);

      // Verificar si es hoy
      const today = new Date();
      if (year === today.getFullYear() && month === today.getMonth() && i === today.getDate()) {
        dayDiv.classList.add('today');
      }

      // Verificar si es fin de semana
      if (isWeekend(currentDay)) {
        dayDiv.classList.add('weekend', 'disabled');
        const indicator = document.createElement('span');
        indicator.classList.add('event-indicator');
        indicator.textContent = 'Fin de Semana';
        dayDiv.appendChild(indicator);
        calendarGrid.appendChild(dayDiv);
        continue;
      }

      // Verificar si es feriado
      if (isHoliday(month, i)) {
        dayDiv.classList.add('holiday', 'disabled');
        const indicator = document.createElement('span');
        indicator.classList.add('event-indicator');
        indicator.textContent = 'Feriado';
        dayDiv.appendChild(indicator);
        calendarGrid.appendChild(dayDiv);
        continue;
      }

      // DÃ­a normal, se puede seleccionar
      dayDiv.addEventListener('click', () => {
        dayDiv.classList.toggle('selected');
        updateSelectedDays();
      });

      calendarGrid.appendChild(dayDiv);
    }

    // Completar la cuadrÃ­cula con los dÃ­as del mes siguiente
    const totalDaysDisplayed = firstDayOfWeek + numDaysInMonth;
    const remainingDays = 42 - totalDaysDisplayed;
    for (let i = 1; i <= remainingDays; i++) {
      const dayDiv = document.createElement('div');
      dayDiv.classList.add('day', 'other-month');
      dayDiv.textContent = i;
      calendarGrid.appendChild(dayDiv);
    }
  }

  function updateSelectedDays() {
    selectedDays = Array.from(document.querySelectorAll('.day.selected')).map(d => parseInt(d.textContent));
    confirmSelectionButton.style.display = selectedDays.length > 0 ? 'block' : 'none';
  }

  function openModal(modalElement) {
    modalElement.style.display = 'flex';
    setTimeout(() => {
      modalElement.classList.add('show');
      modalElement.querySelector('.modal-content').style.opacity = '1';
      modalElement.querySelector('.modal-content').style.transform = 'scale(1)';
    }, 10);
  }

  function closeModal(modalElement) {
    modalElement.classList.remove('show');
    modalElement.querySelector('.modal-content').style.opacity = '0';
    modalElement.querySelector('.modal-content').style.transform = 'scale(0.8)';
    setTimeout(() => {
      modalElement.style.display = 'none';
    }, 500);
  }

  function openRequestModal() {
    selectedDaysCount.textContent = selectedDays.length;
    openModal(requestModal);
  }

  function openNotificationsModal() {
    loadNotifications();
    openModal(notificationsModal);
  }

  async function generatePDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const nombre = profileElements.nombre.textContent.trim();
    const rut = profileElements.rut.textContent.trim();
    const tipoPermiso = leaveTypeSelect.options[leaveTypeSelect.selectedIndex].text;

    const diasOrdenados = [...selectedDays].sort((a, b) => a - b);
    const mesActual = currentDate.toLocaleString("es-ES", { month: "long" });
    const aÃ±oActual = currentDate.getFullYear();

    const fechaInicio = `${diasOrdenados[0]} de ${mesActual} de ${aÃ±oActual}`;
    const fechaFin = `${diasOrdenados[diasOrdenados.length - 1]} de ${mesActual} de ${aÃ±oActual}`;
    const fechaHoy = new Date().toLocaleDateString("es-CL");

    // TÃ­tulo centrado
    doc.setFontSize(14);
    doc.setFont(undefined, "bold");
    doc.text(`Solicitud de ${tipoPermiso}`, doc.internal.pageSize.getWidth() / 2, 30, { align: "center" });

    // Cuerpo del oficio
    doc.setFontSize(12);
    doc.setFont(undefined, "normal");

    let cuerpoOficio;
    if (selectedDays.length === 1) {
      cuerpoOficio = `
Se solicita tener a bien aprobar mi dÃ­a de ${tipoPermiso.toLowerCase()} correspondiente al periodo comprendido entre el ${fechaInicio}.
Desde ya muchas gracias.`;
    } else {
      cuerpoOficio = `
Se solicita tener a bien aprobar los ${selectedDays.length} dÃ­as de ${tipoPermiso.toLowerCase()} comprendidos entre el ${fechaInicio} y el ${fechaFin}.
Desde ya muchas gracias.`;
    }

    const lines = doc.splitTextToSize(cuerpoOficio, 170);
    let startY = 40;

    lines.forEach(line => {
      doc.text(line, 20, startY);
      startY += 10;
    });

    // Fecha derecha
    startY += 20;
    doc.text(`La Serena, ${fechaHoy}`, doc.internal.pageSize.getWidth() - 20, startY, { align: "right" });

    // Saludo final
    startY += 10;
    doc.text("Atentamente,", 20, startY);

    // LÃ­nea de firma encima del nombre, alineada a la derecha
    const fontSize = 12;
    const charWidthApprox = 0.2 * fontSize;
    const lineLength = nombre.length * charWidthApprox;
    const textX = doc.internal.pageSize.getWidth() - 20;
    const textY = startY + 10;
    const lineStartX = textX - lineLength;

    doc.line(lineStartX, textY, textX, textY);
    doc.text(nombre, textX, textY + 5, { align: "right" });
    doc.text(rut, textX, textY + 15, { align: "right" });

    // Guardar el PDF
    doc.save(`solicitud_${tipoPermiso.toLowerCase().replace(/\s+/g, '_')}.pdf`);
    
    // Mostrar notificaciÃ³n
    showNotification('PDF Generado', `Se ha descargado la solicitud de ${tipoPermiso.toLowerCase()} correctamente.`, 'success');
    
    // AÃ±adir una notificaciÃ³n simulando aprobaciÃ³n (para demo)
    const newNotif = {
      id: notifications.length + 1,
      title: 'Solicitud Enviada',
      message: `Tu solicitud de ${tipoPermiso.toLowerCase()} para ${selectedDays.length > 1 ? 'los dÃ­as' : 'el dÃ­a'} ${diasOrdenados.join(', ')} de ${mesActual} ha sido enviada para aprobaciÃ³n.`,
      type: 'info',
      date: new Date().toISOString(),
      read: false
    };
    
    notifications.push(newNotif);
    updateNotificationBadge();
    
    // Iniciar simulaciÃ³n de respuesta
    simulatePermissionResponse();
    
    // Cerrar modal
    closeModal(requestModal);
  }

  function hideEditForm() {
    editProfileForm.style.display = 'none';
  }

  function saveProfile() {
    let isValid = true;
    
    // Validar todos los campos antes de guardar
    isValid = validateField('nombre', inputFields.nombre.value) && isValid;
    isValid = validateField('rut', inputFields.rut.value) && isValid;
    isValid = validateField('telefono', inputFields.telefono.value) && isValid;
    isValid = validateField('correo', inputFields.correo.value) && isValid;
    
    if (!isValid) {
      showNotification('Error de ValidaciÃ³n', 'Por favor, corrige los errores en el formulario.', 'error');
      return;
    }
    
    const nuevoNombre = inputFields.nombre.value.trim();
    const nuevoRut = inputFields.rut.value.trim();
    const nuevaDireccion = inputFields.direccion.value.trim();
    const nuevoTelefono = inputFields.telefono.value.trim();
    const nuevoCorreo = inputFields.correo.value.trim();
    const fotoInput = inputFields.foto.files[0];

    if (nuevoNombre) profileElements.nombre.textContent = nuevoNombre;
    if (nuevoRut) profileElements.rut.textContent = nuevoRut;
    if (nuevaDireccion) profileElements.direccion.textContent = nuevaDireccion;
    if (nuevoTelefono) profileElements.telefono.textContent = nuevoTelefono;
    if (nuevoCorreo) profileElements.correo.textContent = nuevoCorreo;

    if (fotoInput) {
      const reader = new FileReader();
      reader.onload = function(e) {
        profileElements.profilePic.src = e.target.result;
        localStorage.setItem('profilePhoto', e.target.result);
      };
      reader.readAsDataURL(fotoInput);
    }

    localStorage.setItem('userName', nuevoNombre || '');
    localStorage.setItem('userRut', nuevoRut || '');
    localStorage.setItem('userDireccion', nuevaDireccion || '');
    localStorage.setItem('userTelefono', nuevoTelefono || '');
    localStorage.setItem('userCorreo', nuevoCorreo || '');

    hideEditForm();
    
    // Mostrar notificaciÃ³n
    showNotification('Perfil Actualizado', 'Los cambios en tu perfil han sido guardados correctamente.', 'success');
    
    // Desplazarse al inicio de la pÃ¡gina
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // Botones y event listeners
  welcomeLoginButton.addEventListener('click', () => showPage(loginPage));
  backToWelcomeButton.addEventListener('click', () => showPage(welcomePage));

  loginButton.addEventListener('click', () => {
    const email = emailInput.value;
    const password = passwordInput.value;
    
    const emailValid = validateField('email', email);
    const passwordValid = validateField('password', password);
    
    if (emailValid && passwordValid && email && password) {
      localStorage.setItem('loggedIn', 'true');
      showPage(profilePage);
      showNotification('Bienvenido/a', 'Has iniciado sesiÃ³n correctamente.', 'success');
    } else {
      showNotification('Error de Login', 'Por favor, ingresa un correo y contraseÃ±a vÃ¡lidos.', 'error');
    }
  });

  managePermissionsButton.addEventListener('click', () => showPage(calendarPage));
  backToProfileButton.addEventListener('click', () => showPage(profilePage));

  prevMonthButton.addEventListener('click', () => {
    currentDate.setMonth(currentDate.getMonth() - 1);
    renderCalendar(currentDate);
  });

  nextMonthButton.addEventListener('click', () => {
    currentDate.setMonth(currentDate.getMonth() + 1);
    renderCalendar(currentDate);
  });

  confirmSelectionButton.addEventListener('click', () => {
    if (selectedDays.length > 0) openRequestModal();
  });

  document.getElementById('generate-pdf-button').addEventListener('click', generatePDF);
  document.getElementById('close-modal-button').addEventListener('click', () => closeModal(requestModal));
  
  notificationsBtn.addEventListener('click', openNotificationsModal);
  closeNotificationsBtn.addEventListener('click', () => closeModal(notificationsModal));

  editProfileButton.addEventListener('click', () => {
    // Mostrar el formulario con animaciÃ³n
    editProfileForm.style.display = 'block';

    // Llenar los campos con los valores actuales
    inputFields.nombre.value = profileElements.nombre.textContent;
    inputFields.rut.value = profileElements.rut.textContent;
    inputFields.direccion.value = profileElements.direccion.textContent;
    inputFields.telefono.value = profileElements.telefono.textContent;
    inputFields.correo.value = profileElements.correo.textContent;
  });

  saveProfileButton.addEventListener('click', saveProfile);
  cancelEditButton.addEventListener('click', hideEditForm);

  // Carga inicial desde localStorage
  window.onload = () => {
    const savedName = localStorage.getItem('userName') || "Ruth PÃ©rez";
    const savedRut = localStorage.getItem('userRut') || "12.345.678-9";
    const savedDireccion = localStorage.getItem('userDireccion') || "Calle Falsa 123, La Serena";
    const savedTelefono = localStorage.getItem('userTelefono') || "+56 9 1234 5678";
    const savedCorreo = localStorage.getItem('userCorreo') || "ruth.perez@example.com";
    const savedPhoto = localStorage.getItem('profilePhoto') || "https://placehold.co/100x100/cccccc/999999?text=Foto+Perfil";

    profileElements.nombre.textContent = savedName;
    profileElements.rut.textContent = savedRut;
    profileElements.direccion.textContent = savedDireccion;
    profileElements.telefono.textContent = savedTelefono;
    profileElements.correo.textContent = savedCorreo;
    profileElements.profilePic.src = savedPhoto;

    // Inicializar la validaciÃ³n
    setupValidation();
    
    // Actualizar el contador de notificaciones
    updateNotificationBadge();
    
    // Inicializar el tema basado en preferencias del sistema
    updateThemeAppearance();
    
    // Asegurar que la pÃ¡gina comience en la parte superior
    window.scrollTo(0, 0);
    
    // Mostrar pÃ¡gina de bienvenida en lugar de login
    showPage(welcomePage);
    
    // Mostrar notificaciÃ³n de bienvenida
    setTimeout(() => {
      // Determinar el saludo basado en la hora del dÃ­a
      const hora = new Date().getHours();
      let greeting = "";
      
      if (hora < 12) {
        greeting = "Â¡Buenos dÃ­as!";
      } else if (hora < 18) {
        greeting = "Â¡Buenas tardes!";
      } else {
        greeting = "Â¡Buenas noches!";
      }
      
      showNotification(greeting, 'Bienvenido al sistema de gestiÃ³n de permisos.', 'info');
    }, 1000);
  };

  // DemostraciÃ³n de aprobaciÃ³n/rechazo de permisos (para fines de prueba)
  function simulatePermissionResponse() {
    // Simular una respuesta aleatoria despuÃ©s de un tiempo
    const responses = [
      {
        title: 'Permiso Aprobado',
        message: 'Tu solicitud de permiso ha sido aprobada por tu supervisor.',
        type: 'success'
      },
      {
        title: 'Permiso Rechazado',
        message: 'Tu solicitud de permiso ha sido rechazada. Contacta a tu supervisor para mÃ¡s informaciÃ³n.',
        type: 'error'
      }
    ];
    
    // Esperar entre 10 y 20 segundos para simular procesamiento
    const randomTime = Math.floor(Math.random() * 10000) + 10000;
    setTimeout(() => {
      const randomResponse = responses[Math.floor(Math.random() * responses.length)];
      
      // AÃ±adir a las notificaciones
      const newNotif = {
        id: notifications.length + 1,
        title: randomResponse.title,
        message: randomResponse.message,
        type: randomResponse.type,
        date: new Date().toISOString(),
        read: false
      };
      
      notifications.push(newNotif);
      updateNotificationBadge();
      
      // Mostrar notificaciÃ³n emergente
      showNotification(randomResponse.title, randomResponse.message, randomResponse.type);
    }, randomTime);
  }
</script>
</body>
</html><!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Portal de Usuario</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" />
  <style>
    :root {
      --background-color: #e0e0e0;
      --text-color: #333;
      --text-color-light: #555;
      --card-bg: rgba(255, 255, 255, 0.2);
      --input-bg: rgba(255, 255, 255, 0.4);
      --primary-color: rgba(100, 149, 237, 0.8);
      --primary-hover: rgba(70, 130, 180, 0.9);
      --secondary-bg: rgba(255, 255, 255, 0.3);
      --secondary-hover: rgba(255, 255, 255, 0.5);
      --cloud-gradient: linear-gradient(to bottom, #a0c0e0, #c0d0e0);
      --weekend-bg: rgba(255, 69, 0, 0.6);
      --today-border: rgba(255, 99, 71, 0.7);
      --selected-bg: rgba(255, 165, 0, 0.7);
      --disabled-bg: rgba(255, 69, 0, 0.3);
      --shadow-color: rgba(0, 0, 0, 0.1);
      --shadow-color-hover: rgba(0, 0, 0, 0.15);
      --modal-bg: white;
      --modal-overlay: rgba(0, 0, 0, 0.6);
      --profile-border: rgba(255, 255, 255, 0.5);
      --error-color: #ff3333;
      --success-color: #33cc33;
      --notification-bg: rgba(255, 255, 255, 0.9);
      --notification-border: #ddd;
      --holiday-color: white;
    }

    .dark-mode {
      --background-color: #121212;
      --text-color: #e0e0e0;
      --text-color-light: #b0b0b0;
      --card-bg: rgba(30, 30, 30, 0.6);
      --input-bg: rgba(50, 50, 50, 0.8);
      --primary-color: rgba(70, 130, 180, 0.8);
      --primary-hover: rgba(100, 149, 237, 0.9);
      --secondary-bg: rgba(40, 40, 40, 0.5);
      --secondary-hover: rgba(60, 60, 60, 0.7);
      --cloud-gradient: linear-gradient(to bottom, #203040, #304050);
      --weekend-bg: rgba(180, 60, 30, 0.6);
      --today-border: rgba(180, 70, 50, 0.7);
      --selected-bg: rgba(180, 120, 20, 0.7);
      --disabled-bg: rgba(180, 60, 30, 0.3);
      --shadow-color: rgba(0, 0, 0, 0.2);
      --shadow-color-hover: rgba(0, 0, 0, 0.3);
      --modal-bg: #333;
      --modal-overlay: rgba(0, 0, 0, 0.8);
      --profile-border: rgba(100, 100, 100, 0.5);
      --error-color: #ff5555;
      --success-color: #55cc55;
      --notification-bg: rgba(50, 50, 50, 0.9);
      --notification-border: #444;
      --holiday-color: #e0e0e0;
    }

    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--background-color);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 50px 0;
      overflow-y: auto;
      position: relative;
      color: var(--text-color);
      transition: all 0.5s ease;
    }

    /* Fondo animado */
    #clouds-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -10;
      overflow: hidden;
      transition: all 0.5s ease;
    }

    .clouds-gradient {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--cloud-gradient);
      z-index: -9;
      transition: background 0.5s ease;
    }

    .clouds-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 200%;
      height: 100%;
      background-image: url('https://raw.githubusercontent.com/danielfigueroa1879/User/40c376aa2e2f949b71a93eaa2636ca4ebc4768f9/nubes.jpg');
      background-size: cover;
      background-repeat: repeat-x;
      opacity: 0.4;
      animation: animateClouds 60s linear infinite;
      z-index: -8;
    }

    @keyframes animateClouds {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    /* Sistema de notificaciones */
    #notification-center {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 300px;
      max-height: 80vh;
      overflow-y: auto;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .notification {
      background-color: var(--notification-bg);
      color: var(--text-color);
      border-left: 4px solid var(--primary-color);
      border-radius: 5px;
      padding: 12px 15px;
      margin-bottom: 10px;
      box-shadow: 0 3px 10px var(--shadow-color);
      transform: translateX(120%);
      opacity: 0;
      transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), 
                  opacity 0.5s ease;
      width: auto;
      max-width: 100%;
      min-width: 250px; /* Ancho mÃ­nimo para evitar saltos de lÃ­nea */
    }

    .notification.show {
      transform: translateX(0);
      opacity: 1;
    }

    .notification.success {
      border-left-color: var(--success-color);
    }

    .notification.error {
      border-left-color: var(--error-color);
    }

    .notification.warning {
      border-left-color: orange;
    }

    .notification-title {
      font-weight: 600;
      margin-bottom: 5px;
      display: flex;
      justify-content: space-between;
      white-space: nowrap; /* Evita que el tÃ­tulo se divida en mÃºltiples lÃ­neas */
    }

    .notification-close {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 16px;
      color: var(--text-color-light);
      padding: 0;
      margin-left: 10px;
    }

    .notification-message {
      font-size: 0.9em;
    }

    /* PÃ¡gina de bienvenida */
    .welcome-content {
      width: 100%;
      text-align: center;
      padding: 20px 0;
    }

    .welcome-logo {
      margin: 0 auto 20px;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }

    .welcome-content h1 {
      font-size: 2.5em;
      color: var(--text-color);
      margin-bottom: 10px;
      text-shadow: 0 2px 4px var(--shadow-color);
    }

    .welcome-subtitle {
      font-size: 1.2em;
      color: var(--text-color-light);
      margin-bottom: 30px;
    }

    .welcome-features {
      display: grid;
      grid-template-columns: repeat(2, 160px);
      grid-template-rows: repeat(2, 120px);
      column-gap: 80px;   /* SeparaciÃ³n horizontal reducida */
      row-gap: 60px;      /* SeparaciÃ³n vertical */
      justify-content: center;
      margin-bottom: 40px;
      margin-top: 40px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      padding: 20px;
    }

    .feature-item {
      background-color: var(--card-bg);
      padding: 15px 10px;
      border-radius: 10px;
      width: 160px;
      height: 120px;
      text-align: center;
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      box-shadow: 0 4px 6px var(--shadow-color);
      transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), 
                  box-shadow 0.3s ease;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .feature-item:hover {
      transform: translateY(-5px) scale(1.03);
      box-shadow: 0 6px 10px var(--shadow-color-hover);
    }

    .feature-icon {
      font-size: 2em;
      margin-bottom: 10px;
    }

    .feature-text {
      font-weight: 500;
      color: var(--text-color);
      font-size: 0.95em;
      line-height: 1.3;
      text-align: center;
      width: 100%;
      margin: 0 auto;
    }

    .primary-button {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 30px;
      font-size: 1.1em;
      cursor: pointer;
      transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55), 
                  box-shadow 0.3s ease, 
                  background-color 0.3s ease;
      box-shadow: 0 4px 6px var(--shadow-color);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      margin-top: 20px;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .primary-button:hover {
      background-color: var(--primary-hover);
      transform: translateY(-3px) scale(1.03);
      box-shadow: 0 6px 12px var(--shadow-color-hover);
    }

    .secondary-button {
      background: var(--secondary-bg);
      color: var(--text-color);
      border: 1px solid rgba(255, 255, 255, 0.3);
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      font-size: 0.9em;
      transition: background-color 0.3s ease, transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      margin-top: 10px;
    }

    .secondary-button:hover {
      background: var(--secondary-hover);
      transform: translateY(-2px) scale(1.02);
    }

    .page-container {
      max-width: 600px;
      width: 90%;
      margin: 0 auto 20px auto;
      background-color: var(--card-bg);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.18);
      z-index: 1;
      position: relative;
      transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), 
                  box-shadow 0.3s ease,
                  background-color 0.5s ease;
      display: none;
      box-sizing: border-box;
      color: var(--text-color);
    }

    .page-container:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 32px 0 rgba(31, 38, 135, 0.47);
    }

    .form-group {
      margin-bottom: 15px;
      position: relative;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: var(--text-color);
      transition: color 0.3s ease;
    }

    .form-group input {
      width: 100%;
      padding: 10px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 8px;
      background-color: var(--input-bg);
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
      color: var(--text-color);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      transition: all 0.3s ease;
    }

    .form-group input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(100, 149, 237, 0.3);
    }

    .form-group .error-message {
      color: var(--error-color);
      font-size: 0.8em;
      margin-top: 5px;
      font-weight: 500;
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .form-group .error-message.show {
      opacity: 1;
      transform: translateY(0);
    }

    .form-group.error input {
      border-color: var(--error-color);
    }

    button {
      background-color: var(--primary-color);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.3);
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      font-size: 1em;
      transition: background-color 0.3s ease, 
                 transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55), 
                 box-shadow 0.3s ease;
      backdrop-filter: blur(5px);
      display: block;
      width: 100%;
      margin-top: 20px;
    }

    button:hover {
      background-color: var(--primary-hover);
      transform: scale(1.02) translateY(-2px);
      box-shadow: 0 4px 8px var(--shadow-color-hover);
    }

    #profile-page h2 {
      text-align: center;
      color: var(--text-color);
      margin-bottom: 20px;
    }

    .profile-info p {
      margin-bottom: 10px;
      color: var(--text-color-light);
      padding: 8px;
      background-color: var(--secondary-bg);
      border-radius: 5px;
      transition: all 0.3s ease;
    }

    .profile-info p:hover {
      transform: translateX(5px);
      background-color: var(--secondary-hover);
    }

    .profile-info strong {
      color: var(--text-color);
    }

    #calendar-page .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 0 10px;
    }

    #calendar-page .calendar-header h2 {
      margin: 0;
      font-size: 1.5em;
      color: var(--text-color);
    }

    #calendar-page .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      text-align: center;
    }

    #calendar-page .day-name {
      font-weight: bold;
      color: var(--text-color-light);
      padding: 10px 0;
    }

    #calendar-page .day {
      padding: 10px 5px;
      border-radius: 8px;
      background-color: var(--input-bg);
      cursor: pointer;
      transition: background-color 0.3s ease, 
                 transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
      position: relative;
      overflow: hidden;
      color: var(--text-color);
    }

    #calendar-page .day:hover {
      background-color: var(--secondary-hover);
      transform: scale(1.05);
    }

    #calendar-page .day.other-month {
      opacity: 0.5;
      pointer-events: none;
    }

    #calendar-page .day.today {
      font-weight: bold;
      border: 2px solid var(--today-border);
    }

    #calendar-page .day.selected {
      background-color: var(--selected-bg);
      color: white;
      font-weight: bold;
      transform: scale(1.05);
    }

    #calendar-page .day.holiday,
    #calendar-page .day.weekend {
      background-color: var(--weekend-bg);
      color: var(--holiday-color);
      font-weight: bold;
      cursor: not-allowed !important;
    }

    #calendar-page .day.disabled {
      background-color: var(--disabled-bg);
      color: var(--holiday-color);
      cursor: not-allowed;
      pointer-events: none;
    }

    #calendar-page .day .event-indicator {
      position: absolute;
      bottom: 2px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.6em;
      color: rgba(255, 255, 255, 0.8);
    }

    #calendar-page .day.holiday .event-indicator {
      color: rgba(255, 255, 255, 0.9);
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--modal-overlay);
      justify-content: center;
      align-items: center;
      z-index: 9999;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    .modal.show {
      opacity: 1;
    }

    .modal-content {
      background: var(--modal-bg);
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      transform: scale(0.8);
      opacity: 0;
      transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), 
                  opacity 0.5s ease;
      color: var(--text-color);
    }

    .modal.show .modal-content {
      transform: scale(1);
      opacity: 1;
    }

    .modal-content select,
    .modal-content button {
      margin-top: 10px;
      padding: 10px;
      width: 100%;
      font-size: 1em;
      background-color: var(--input-bg);
      color: var(--text-color);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .modal-content select:focus {
      outline: none;
      border-color: var(--primary-color);
    }

    /* Formulario de ediciÃ³n de perfil */
    .edit-profile-form {
      display: none;
      margin-top: 20px;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .edit-profile-form input[type="text"],
    .edit-profile-form input[type="email"] {
      width: 100%;
      margin-bottom: 10px;
    }

    .edit-profile-form label {
      display: block;
      margin-bottom: 5px;
      color: var(--text-color);
    }

    .edit-profile-form input[type="file"] {
      margin-top: 10px;
    }

    .profile-photo {
      text-align: center;
      margin-bottom: 20px;
    }

    .profile-photo img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--profile-border);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      box-shadow: 0 4px 8px var(--shadow-color);
    }

    .profile-photo img:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 16px var(--shadow-color-hover);
    }

    /* Badge de notificaciÃ³n */
    .notification-badge {
      position: relative;
    }

    .notification-badge[data-count]:after {
      content: attr(data-count);
      position: absolute;
      top: -10px;
      right: -10px;
      background: var(--error-color);
      color: white;
      border-radius: 50%;
      padding: 3px 6px;
      font-size: 12px;
      font-weight: bold;
      min-width: 14px;
      text-align: center;
      box-shadow: 0 2px 4px var(--shadow-color);
    }

    @media (max-width: 768px) {
      .page-container {
        padding: 20px;
      }
      
      .welcome-features {
        grid-template-columns: repeat(2, 130px);  /* Cuadros mÃ¡s grandes */
        grid-template-rows: repeat(2, 110px);
        column-gap: 55px;  /* Ajustamos la separaciÃ³n horizontal */
        row-gap: 55px;     /* Mantenemos la separaciÃ³n vertical */
        padding: 0;        /* Quitamos el padding para mejorar el centrado */
        margin: 30px auto 40px; /* MÃ¡s espacio abajo */
        max-width: 315px;  /* Ancho exacto basado en el contenido (2Ã130px + 55px gap) */
        justify-content: center;
      }
      
      .feature-item {
        width: 130px;      /* Cuadros mÃ¡s grandes */
        height: 110px;
        padding: 10px 8px;  /* Menos padding horizontal */
        font-size: 0.85em;
      }
      
      .feature-text {
        font-size: 0.9em;  /* Texto mÃ¡s pequeÃ±o en tablets */
      }
      
      .primary-button {
        margin-top: 25px; /* MÃ¡s espacio sobre el botÃ³n */
      }
      
      .feature-icon {
        font-size: 1.8em;   /* Icono mÃ¡s pequeÃ±o */
        margin-bottom: 8px;
      }

      #calendar-page .calendar-header h2 {
        font-size: 1.2em;
      }

      #calendar-page .calendar-header button {
        padding: 6px 10px;
        font-size: 0.9em;
      }

      #calendar-page .day {
        padding: 8px 3px;
        font-size: 0.9em;
      }

      .profile-info p {
        font-size: 0.9em;
      }

      .form-group input {
        font-size: 0.9em;
      }

      .modal-content {
        font-size: 0.9em;
      }
      
    @media (max-width: 480px) {
      /* Ajustes para pantallas muy pequeÃ±as (smartphones) */
      .welcome-content {
        padding: 10px 0;
        max-width: 100%;
      }
      
      .welcome-features {
        display: grid;
        grid-template-columns: repeat(2, 110px);  /* Cuadros del mismo tamaÃ±o */
        grid-template-rows: repeat(2, 100px);
        gap: 45px 32px;      /* row-gap column-gap combinados */
        padding: 0;          /* Sin padding */
        margin: 25px auto 45px; /* Espaciado vertical */
        max-width: 252px;    /* Ancho mÃ¡ximo */
        justify-content: space-between; /* DistribuciÃ³n uniforme */
      }
      
      /* ReducciÃ³n del tamaÃ±o de la notificaciÃ³n de bienvenida en mÃ³viles */
      #notification-center .notification {
        width: 220px;
        padding: 8px 12px;
        font-size: 0.85em;
        min-width: 200px; /* Ancho mÃ­nimo para mÃ³viles */
      }
      
      .notification-title {
        font-size: 0.95em;
        margin-bottom: 3px;
      }
      
      .notification-message {
        font-size: 0.85em;
      }
      
      .feature-item {
        width: 110px;        /* TamaÃ±o uniforme */
        height: 100px;
        padding: 8px 5px;    /* Padding reducido horizontalmente */
        font-size: 0.8em;
      }
      
      .feature-text {
        font-size: 0.85em;  /* Texto aÃºn mÃ¡s pequeÃ±o en mÃ³viles */
        line-height: 1.2;
      }
      
      .primary-button {
        margin-top: 30px; /* MÃ¡s espacio sobre el botÃ³n */
      }
      
      /* ReducciÃ³n del tamaÃ±o de la notificaciÃ³n de bienvenida en mÃ³viles */
      #notification-center .notification {
        width: 220px;
        padding: 8px 12px;
        font-size: 0.85em;
      }
      
      .notification-title {
        font-size: 0.95em;
        margin-bottom: 3px;
      }
      
      .notification-message {
        font-size: 0.85em;
      }
    }
      
      .feature-icon {
        font-size: 1.6em;
        margin-bottom: 5px;
      }
      
      .welcome-content h1 {
        font-size: 2em;
      }
      
      .welcome-subtitle {
        font-size: 1em;
      }
    }

    /* Animaciones de pÃ¡gina */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translate3d(0, 40px, 0);
      }
      to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
      }
    }

    .fade-in-up {
      animation: fadeInUp 0.5s ease forwards;
    }
  </style>
</head>
<body>

<!-- Fondo animado -->
<div id="clouds-background">
  <div class="clouds-gradient"></div>
  <div class="clouds-image"></div>
</div>

<!-- Centro de notificaciones -->
<div id="notification-center"></div>

<!-- Contenedores -->
<div id="welcome-page" class="page-container">
  <div class="welcome-content">
    <div class="welcome-logo">
      <svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 3L19 8.5V15.5L12 21L5 15.5V8.5L12 3Z" stroke="#6495ED" stroke-width="2" fill="rgba(100, 149, 237, 0.2)"></path>
        <path d="M12 8L15 10V14L12 16L9 14V10L12 8Z" fill="#6495ED"></path>
      </svg>
    </div>
    <h1>Portal de Usuarios</h1>
    <p class="welcome-subtitle">Sistema de gestiÃ³n de permisos y feriados</p>
    <div class="welcome-features">
      <div class="feature-item">
        <div class="feature-icon">ð</div>
        <div class="feature-text">Calendario Interactivo</div>
      </div>
      <div class="feature-item">
        <div class="feature-icon">ð</div>
        <div class="feature-text">GestiÃ³n de Permisos</div>
      </div>
      <div class="feature-item">
        <div class="feature-icon">ð</div>
        <div class="feature-text">GeneraciÃ³n de PDF</div>
      </div>
      <div class="feature-item">
        <div class="feature-icon notification-badge" data-count="2">ð</div>
        <div class="feature-text">Notificaciones</div>
      </div>
    </div>
    <button id="welcome-login-button" class="primary-button">Ingresar al Sistema</button>
  </div>
</div>

<div id="login-page" class="page-container">
  <h2>Iniciar SesiÃ³n</h2>
  <div class="form-group" id="email-group">
    <label for="email">Correo ElectrÃ³nico:</label>
    <input type="email" id="email" placeholder="Ingresa tu correo" />
    <div class="error-message" id="email-error"></div>
  </div>
  <div class="form-group" id="password-group">
    <label for="password">ContraseÃ±a:</label>
    <input type="password" id="password" placeholder="Ingresa tu contraseÃ±a" />
    <div class="error-message" id="password-error"></div>
  </div>
  <button id="login-button">Entrar</button>
  <button id="back-to-welcome-button" class="secondary-button">Volver</button>
</div>

<div id="profile-page" class="page-container">
  <div class="profile-photo">
    <img id="profile-pic" src="https://placehold.co/100x100/cccccc/999999?text=Foto+Perfil" alt="Foto de perfil">
  </div>
  <h2>Mi Perfil</h2>
  <div class="profile-info">
    <p><strong>Nombre Completo:</strong> <span id="nombre-display">Ruth PÃ©rez</span></p>
    <p><strong>RUT:</strong> <span id="rut-display">12.345.678-9</span></p>
    <p><strong>DirecciÃ³n:</strong> <span id="direccion-display">Calle Falsa 123, Santiago</span></p>
    <p><strong>TelÃ©fono:</strong> <span id="telefono-display">+56 9 1234 5678</span></p>
    <p><strong>Correo:</strong> <span id="correo-display">ruth.perez@example.com</span></p>
  </div>
  <button id="edit-profile-button">Editar Perfil</button>
  <button id="manage-permissions-button">Gestionar Permisos y Feriados</button>
  <button id="view-notifications-button" class="notification-badge" data-count="2">Ver Notificaciones</button>
  <button onclick="showPage(welcomePage)" style="margin-top: 10px;">â¬ï¸ AtrÃ¡s</button>

  <!-- Formulario de ediciÃ³n de perfil -->
  <div id="edit-profile-form" class="edit-profile-form">
    <h3>Editar Datos</h3>
    <div class="form-group" id="nombre-group">
      <label for="nombre-input">Nombre:</label>
      <input type="text" id="nombre-input" placeholder="Tu nombre completo">
      <div class="error-message" id="nombre-error"></div>
    </div>
    <div class="form-group" id="rut-group">
      <label for="rut-input">RUT:</label>
      <input type="text" id="rut-input" placeholder="Ej: 12.345.678-9">
      <div class="error-message" id="rut-error"></div>
    </div>
    <div class="form-group" id="direccion-group">
      <label for="direccion-input">DirecciÃ³n:</label>
      <input type="text" id="direccion-input" placeholder="Tu direcciÃ³n">
      <div class="error-message" id="direccion-error"></div>
    </div>
    <div class="form-group" id="telefono-group">
      <label for="telefono-input">TelÃ©fono:</label>
      <input type="text" id="telefono-input" placeholder="+56 9 1234 5678">
      <div class="error-message"
